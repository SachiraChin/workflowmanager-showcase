{
  "type": "object",
  "_ux.display": "passthrough",
  "properties": {
    "_ux.display": "passthrough",
    "scene_title": {
      "type": "string",
      "_ux.display": false
    },
    "key_moment": {
      "type": "string",
      "_ux.display": false
    },
    "prompts": {
      "type": "object",
      "_ux": {
        "display": "visible",
        "render_as": "tabs"
      },
      "properties": {
        "midjourney": {
          "type": "object",
          "_ux": {
            "display": "visible",
            "tab_label": "Midjourney",
            "render_as": "tab.media[input_schema,image_generation]",
            "provider": "midjourney",
            "input_schema": {
              "type": "object",
              "_ux": {
                "layout": "grid",
                "layout_columns": 3,
                "layout_columns_sm": 2
              },
              "properties": {
                "_text": {
                  "type": "string",
                  "title": "Prompt",
                  "destination_field": "prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_field": "prompt"
                  }
                },
                "aspect_ratio": {
                  "type": "string",
                  "title": "Aspect Ratio",
                  "default": "9:16",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.aspect_ratio"
                  }
                },
                "speed": {
                  "type": "string",
                  "title": "Speed",
                  "default": "fast",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.speed"
                  }
                },
                "version": {
                  "type": "string",
                  "title": "Version",
                  "default": "7",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.versions"
                  }
                },
                "stylization": {
                  "type": "integer",
                  "title": "Stylization",
                  "minimum": 0,
                  "maximum": 1000,
                  "default": 100,
                  "step": 10,
                  "_ux": {
                    "input_type": "slider"
                  }
                },
                "weirdness": {
                  "type": "integer",
                  "title": "Weirdness",
                  "minimum": 0,
                  "maximum": 3000,
                  "default": 0,
                  "step": 50,
                  "_ux": {
                    "input_type": "slider"
                  }
                },
                "variety": {
                  "type": "integer",
                  "title": "Variety",
                  "minimum": 0,
                  "maximum": 100,
                  "default": 0,
                  "step": 5,
                  "_ux": {
                    "input_type": "slider"
                  }
                }
              }
            }
          },
          "properties": {
            "prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "style_notes": {
              "type": "string",
              "_ux": {
                "display": true,
                "display_label": "Style",
                "highlight": true,
                "highlight_color": "#7B68EE"
              }
            }
          }
        },
        "leonardo": {
          "type": "object",
          "_ux": {
            "display": "visible",
            "tab_label": "Leonardo",
            "render_as": "tab.media[input_schema,image_generation]",
            "provider": "leonardo",
            "input_schema": {
              "type": "object",
              "_ux": {
                "layout": "grid",
                "layout_columns": 3,
                "layout_columns_sm": 2
              },
              "properties": {
                "_text": {
                  "type": "string",
                  "title": "Prompt",
                  "destination_field": "prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_field": "prompt"
                  }
                },
                "model_id": {
                  "type": "string",
                  "title": "Model",
                  "value_key": "key",
                  "label_key": "label",
                  "default": "de7d3faf-762f-48e0-b3b7-9d0ac3a3fcf3",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.models"
                  },
                  "controls": {
                    "style_uuid": {
                      "type": "enum",
                      "enum_path": "styles",
                      "value_key": "key",
                      "label_key": "label",
                      "default_index": 0,
                      "reset": true
                    },
                    "preset_style": {
                      "type": "enum",
                      "enum_path": "presets",
                      "value_key": "key",
                      "label_key": "label",
                      "default_index": 0,
                      "reset": true
                    }
                  }
                },
                "aspect_ratio": {
                  "type": "string",
                  "title": "Aspect Ratio",
                  "default": "9:16",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.aspect_ratio"
                  }
                },
                "size": {
                  "type": "string",
                  "title": "Size",
                  "default": "medium",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.size"
                  }
                },
                "generation_mode": {
                  "type": "string",
                  "title": "Generation Mode",
                  "default": "fast",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.generation_mode"
                  }
                },
                "style_uuid": {
                  "type": "string",
                  "title": "Style",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "preset_style": {
                  "type": "string",
                  "title": "Preset Style",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "num_images": {
                  "type": "string",
                  "title": "Images",
                  "default": "4",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.num_images"
                  }
                },
                "guidance_scale": {
                  "type": "integer",
                  "title": "Guidance",
                  "minimum": 1,
                  "maximum": 20,
                  "default": 7,
                  "step": 1,
                  "_ux": {
                    "input_type": "slider"
                  }
                },
                "contrast": {
                  "type": "string",
                  "title": "Contrast",
                  "default": "3.0",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.contrast"
                  }
                },
                "num_inference_steps": {
                  "type": "integer",
                  "title": "Steps",
                  "minimum": 10,
                  "maximum": 60,
                  "default": 15,
                  "step": 1,
                  "_ux": {
                    "input_type": "slider"
                  }
                },
                "scheduler": {
                  "type": "string",
                  "title": "Scheduler",
                  "default": "EULER_DISCRETE",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.scheduler"
                  }
                }
              }
            }
          },
          "properties": {
            "prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "style_notes": {
              "type": "string",
              "_ux": {
                "display": true,
                "display_label": "Style",
                "highlight": true,
                "highlight_color": "#FF6B6B"
              }
            }
          }
        },
        "openai": {
          "type": "object",
          "_ux": {
            "display": "visible",
            "tab_label": "OpenAI",
            "render_as": "tab.media[input_schema,image_generation]",
            "provider": "openai",
            "input_schema": {
              "type": "object",
              "_ux": {
                "layout": "grid",
                "layout_columns": 3,
                "layout_columns_sm": 2
              },
              "properties": {
                "_text": {
                  "type": "string",
                  "title": "Prompt",
                  "destination_field": "prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_field": "prompt"
                  }
                },
                "model": {
                  "type": "string",
                  "title": "Model",
                  "default": "gpt-image-1-mini",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.models"
                  }
                },
                "aspect_ratio": {
                  "type": "string",
                  "title": "Size",
                  "default": "2:3",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.aspect_ratio"
                  }
                },
                "quality": {
                  "type": "string",
                  "title": "Quality",
                  "default": "medium",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.quality"
                  }
                },
                "num_images": {
                  "type": "string",
                  "title": "Images",
                  "default": "4",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.num_images"
                  }
                },
                "background": {
                  "type": "string",
                  "title": "Background",
                  "default": "auto",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.background"
                  }
                },
                "output_format": {
                  "type": "string",
                  "title": "Format",
                  "default": "png",
                  "value_key": "key",
                  "label_key": "label",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.output_format"
                  }
                }
              }
            }
          },
          "properties": {
            "prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "camera_notes": {
              "type": "string",
              "_ux": {
                "display": true,
                "display_label": "Camera",
                "highlight": true,
                "highlight_color": "#4ECDC4"
              }
            }
          }
        },
        "stable_diffusion": {
          "type": "object",
          "_ux": {
            "display": "visible",
            "tab_label": "Stable Diffusion",
            "render_as": "tab.media[input_schema,image_generation]",
            "provider": "stable_diffusion",
            "input_schema": {
              "type": "object",
              "_ux": {
                "layout": "grid",
                "layout_columns": 3,
                "layout_columns_sm": 2
              },
              "properties": {
                "prompt_type": {
                  "type": "string",
                  "title": "Prompt Style",
                  "enum": [
                    {
                      "key": "tag",
                      "label": "Tag-based",
                      "value": "{{ state.image_prompts.prompts.stable_diffusion.tag_prompt }}"
                    },
                    {
                      "key": "natural",
                      "label": "Natural Language",
                      "value": "{{ state.image_prompts.prompts.stable_diffusion.natural_prompt }}"
                    }
                  ],
                  "value_key": "key",
                  "label_key": "label",
                  "default": "tag",
                  "_ux": {
                    "input_type": "select"
                  },
                  "controls": {
                    "_text": {
                      "type": "value",
                      "value_path": ".value"
                    }
                  }
                },
                "_text": {
                  "type": "string",
                  "title": "Prompt",
                  "destination_field": "prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_field": "tag_prompt"
                  }
                },
                "negative_prompt": {
                  "type": "string",
                  "title": "Negative Prompt",
                  "destination_field": "negative_prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_field": "negative_prompt"
                  }
                },
                "category": {
                  "type": "string",
                  "title": "Category",
                  "value_key": "id",
                  "label_key": "name",
                  "_ux": {
                    "input_type": "select",
                    "enum_source": "_provider_metadata.categories"
                  },
                  "controls": {
                    "checkpoint": {
                      "type": "enum",
                      "enum_path": "models",
                      "value_key": "checkpoint_name",
                      "label_key": "model_name",
                      "default_index": 0,
                      "reset": true
                    }
                  }
                },
                "checkpoint": {
                  "type": "string",
                  "title": "Model",
                  "_ux": {
                    "input_type": "select"
                  },
                  "controls": {
                    "sampler_combo": {
                      "type": "enum",
                      "enum_path": "params.sampler_combo",
                      "value_key": "value",
                      "label_format": "{value.sampler} / {value.scheduler} ({value.steps} steps, CFG {value.cfg_scale}) (count: {count})",
                      "default_index": 0,
                      "reset": true
                    },
                    "resolution": {
                      "type": "enum",
                      "enum_path": "params.resolution",
                      "value_key": "value",
                      "label_format": "{value.text} (count: {count})",
                      "default_index": 0,
                      "reset": true
                    },
                    "vae": {
                      "type": "enum",
                      "enum_path": "params.vae",
                      "value_key": "value",
                      "default_index": 0,
                      "reset": true
                    },
                    "hires": {
                      "type": "enum",
                      "enum_path": "params.hires",
                      "value_key": "value",
                      "label_format": "{value.upscale}x - {value.upscaler} (denoise: {value.denoising}) (count: {count})",
                      "default_index": -1,
                      "reset": true
                    },
                    "adetailer": {
                      "type": "enum",
                      "enum_path": "params.adetailer",
                      "value_key": "value",
                      "label_format": "{value.model} (conf: {value.confidence}, denoise: {value.denoising_strength}) (count: {count})",
                      "default_index": 0,
                      "reset": true
                    }
                  }
                },
                "sampler_combo": {
                  "type": "string",
                  "title": "Sampler",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "resolution": {
                  "type": "string",
                  "title": "Resolution",
                  "_ux": {
                    "input_type": "select"
                  },
                  "alternative": {
                    "compose": {
                      "text": "{width}x{height}"
                    },
                    "layout": "inline",
                    "fields": [
                      {
                        "key": "width",
                        "type": "integer",
                        "title": "W",
                        "minimum": 64,
                        "maximum": 2048,
                        "step": 64,
                        "default": 512,
                        "_ux": {
                          "input_type": "number"
                        }
                      },
                      {
                        "content": "x",
                        "_ux": {
                          "render_as": "text"
                        }
                      },
                      {
                        "key": "height",
                        "type": "integer",
                        "title": "H",
                        "minimum": 64,
                        "maximum": 2048,
                        "step": 64,
                        "default": 768,
                        "_ux": {
                          "input_type": "number"
                        }
                      }
                    ]
                  }
                },
                "vae": {
                  "type": "string",
                  "title": "VAE",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "hires": {
                  "type": "string",
                  "title": "Hires Fix",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "adetailer": {
                  "type": "string",
                  "title": "ADetailer",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "batch_size": {
                  "type": "integer",
                  "title": "Images",
                  "enum": [
                    1,
                    2,
                    4,
                    8
                  ],
                  "default": 4,
                  "_ux": {
                    "input_type": "select"
                  }
                }
              }
            }
          },
          "properties": {
            "tag_prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "natural_prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "negative_prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "style_notes": {
              "type": "string",
              "_ux": {
                "display": true,
                "display_label": "Style",
                "highlight": true,
                "highlight_color": "#9B59B6"
              }
            }
          }
        }
      }
    }
  }
}
