{
  "type": "object",
  "_ux.display": "passthrough",
  "properties": {
    "_ux.display": "passthrough",
    "scene_title": {
      "type": "string",
      "_ux.display": false
    },
    "key_moment": {
      "type": "string",
      "_ux.display": false
    },
    "prompts": {
      "type": "object",
      "_ux": {
        "display": "visible",
        "render_as": "tabs"
      },
      "properties": {
        "midjourney": {
          "type": "object",
          "_ux": {
            "display": "visible",
            "tab_label": "Midjourney",
            "render_as": "tab.media",
            "provider": "midjourney",
            "input_schema": {
              "type": "object",
              "_ux": {
                "layout": "grid",
                "layout_columns": 3,
                "layout_columns_sm": 2
              },
              "properties": {
                "_text": {
                  "type": "string",
                  "title": "Prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_field": "prompt"
                  }
                },
                "aspect_ratio": {
                  "type": "string",
                  "title": "Aspect Ratio",
                  "enum": ["1:1", "16:9", "9:16", "4:3", "3:4", "3:2", "2:3"],
                  "default": "9:16",
                  "_ux": {
                    "input_type": "select",
                    "enum_labels": {
                      "1:1": "1:1 (Square)",
                      "16:9": "16:9 (Landscape)",
                      "9:16": "9:16 (Portrait)",
                      "4:3": "4:3",
                      "3:4": "3:4",
                      "3:2": "3:2",
                      "2:3": "2:3"
                    }
                  }
                },
                "speed": {
                  "type": "string",
                  "title": "Speed",
                  "enum": ["relaxed", "fast", "turbo"],
                  "default": "fast",
                  "_ux": {
                    "input_type": "select",
                    "enum_labels": {
                      "relaxed": "Relaxed",
                      "fast": "Fast",
                      "turbo": "Turbo"
                    }
                  }
                },
                "version": {
                  "type": "string",
                  "title": "Version",
                  "enum": ["7", "6.1", "6", "5.2", "niji6"],
                  "default": "7",
                  "_ux": {
                    "input_type": "select",
                    "enum_labels": {
                      "7": "V7",
                      "6.1": "V6.1",
                      "6": "V6",
                      "5.2": "V5.2",
                      "niji6": "Niji 6"
                    }
                  }
                },
                "stylization": {
                  "type": "integer",
                  "title": "Stylization",
                  "minimum": 0,
                  "maximum": 1000,
                  "default": 100,
                  "step": 10,
                  "_ux": {
                    "input_type": "slider"
                  }
                },
                "weirdness": {
                  "type": "integer",
                  "title": "Weirdness",
                  "minimum": 0,
                  "maximum": 3000,
                  "default": 0,
                  "step": 50,
                  "_ux": {
                    "input_type": "slider"
                  }
                },
                "variety": {
                  "type": "integer",
                  "title": "Variety",
                  "minimum": 0,
                  "maximum": 100,
                  "default": 0,
                  "step": 5,
                  "_ux": {
                    "input_type": "slider"
                  }
                }
              }
            }
          },
          "properties": {
            "prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "style_notes": {
              "type": "string",
              "_ux": {
                "display": true,
                "display_label": "Style",
                "highlight": true,
                "highlight_color": "#7B68EE"
              }
            }
          }
        },
        "leonardo": {
          "type": "object",
          "_ux": {
            "display": "visible",
            "tab_label": "Leonardo",
            "render_as": "tab"
          },
          "properties": {
            "phoenix_1_0": {
              "type": "object",
              "_ux": {
                "display": true,
                "render_as": "media",
                "display_label": "Phoenix 1.0",
                "provider": "leonardo",
                "prompt_id": "phoenix_1_0",
                "input_schema": {
                  "type": "object",
                  "_ux": {
                    "layout": "grid",
                    "layout_columns": 3,
                    "layout_columns_sm": 2
                  },
                  "properties": {
                    "_text": {
                      "type": "string",
                      "title": "Prompt",
                      "_ux": {
                        "input_type": "textarea",
                        "col_span": "full",
                        "rows": 4,
                        "source_field": "prompt"
                      }
                    },
                    "aspect_ratio": {
                      "type": "string",
                      "title": "Aspect Ratio",
                      "enum": ["1:1", "16:9", "9:16", "4:3", "3:4", "3:2", "2:3"],
                      "default": "9:16",
                      "_ux": {
                        "input_type": "select",
                        "enum_labels": {
                          "1:1": "1:1 (Square)",
                          "16:9": "16:9 (Landscape)",
                          "9:16": "9:16 (Portrait)",
                          "4:3": "4:3",
                          "3:4": "3:4",
                          "3:2": "3:2",
                          "2:3": "2:3"
                        }
                      }
                    },
                    "size": {
                      "type": "string",
                      "title": "Size",
                      "enum": ["small", "medium", "large"],
                      "default": "medium",
                      "_ux": {
                        "input_type": "select",
                        "enum_labels": {
                          "small": "Small (Fast)",
                          "medium": "Medium",
                          "large": "Large"
                        }
                      }
                    },
                    "generation_mode": {
                      "type": "string",
                      "title": "Generation Mode",
                      "enum": ["fast", "quality", "ultra"],
                      "default": "fast",
                      "_ux": {
                        "input_type": "select",
                        "enum_labels": {
                          "fast": "Fast",
                          "quality": "Quality (~1.5x)",
                          "ultra": "Ultra (~2x)"
                        }
                      }
                    },
                    "preset_style": {
                      "type": "string",
                      "title": "Style",
                      "enum": ["NONE", "CINEMATIC", "PHOTOGRAPHY", "ANIME", "ILLUSTRATION", "DYNAMIC", "VIBRANT", "MOODY", "HDR", "BOKEH"],
                      "default": "NONE",
                      "_ux": {
                        "input_type": "select",
                        "enum_labels": {
                          "NONE": "None",
                          "CINEMATIC": "Cinematic",
                          "PHOTOGRAPHY": "Photography",
                          "ANIME": "Anime",
                          "ILLUSTRATION": "Illustration",
                          "DYNAMIC": "Dynamic",
                          "VIBRANT": "Vibrant",
                          "MOODY": "Moody",
                          "HDR": "HDR",
                          "BOKEH": "Bokeh"
                        }
                      }
                    },
                    "num_images": {
                      "type": "string",
                      "title": "Images",
                      "enum": ["1", "2", "4"],
                      "default": "4",
                      "_ux": {
                        "input_type": "select",
                        "enum_labels": {
                          "1": "1",
                          "2": "2",
                          "4": "4"
                        }
                      }
                    },
                    "guidance_scale": {
                      "type": "integer",
                      "title": "Guidance",
                      "minimum": 1,
                      "maximum": 20,
                      "default": 7,
                      "step": 1,
                      "_ux": {
                        "input_type": "slider"
                      }
                    },
                    "contrast": {
                      "type": "string",
                      "title": "Contrast",
                      "enum": ["1.0", "1.3", "1.8", "2.5", "3.0", "3.5", "4.0", "4.5"],
                      "default": "3.0",
                      "_ux": {
                        "input_type": "select",
                        "enum_labels": {
                          "1.0": "1.0 (Low)",
                          "1.3": "1.3",
                          "1.8": "1.8",
                          "2.5": "2.5",
                          "3.0": "3.0 (Default)",
                          "3.5": "3.5",
                          "4.0": "4.0",
                          "4.5": "4.5 (High)"
                        }
                      }
                    },
                    "num_inference_steps": {
                      "type": "integer",
                      "title": "Steps",
                      "minimum": 10,
                      "maximum": 60,
                      "default": 15,
                      "step": 1,
                      "_ux": {
                        "input_type": "slider"
                      }
                    },
                    "scheduler": {
                      "type": "string",
                      "title": "Scheduler",
                      "enum": ["EULER_DISCRETE", "EULER_ANCESTRAL_DISCRETE", "LEONARDO", "DPM_SOLVER", "DDIM", "KLMS", "PNDM"],
                      "default": "EULER_DISCRETE",
                      "_ux": {
                        "input_type": "select",
                        "enum_labels": {
                          "EULER_DISCRETE": "Euler Discrete",
                          "EULER_ANCESTRAL_DISCRETE": "Euler Ancestral",
                          "LEONARDO": "Leonardo",
                          "DPM_SOLVER": "DPM Solver",
                          "DDIM": "DDIM",
                          "KLMS": "KLMS",
                          "PNDM": "PNDM"
                        }
                      }
                    }
                  }
                }
              },
              "properties": {
                "prompt": {
                  "type": "string",
                  "_ux": {
                    "display": false
                  }
                },
                "style_notes": {
                  "type": "string",
                  "_ux": {
                    "display": true,
                    "display_label": "Style",
                    "highlight": true,
                    "highlight_color": "#FF6B6B"
                  }
                }
              }
            }
          }
        },
        "sora": {
          "type": "object",
          "_ux": {
            "display": "visible",
            "tab_label": "Sora",
            "render_as": "tab.media",
            "provider": "sora",
            "input_schema": {
              "type": "object",
              "_ux": {
                "layout": "grid",
                "layout_columns": 3,
                "layout_columns_sm": 2
              },
              "properties": {
                "_text": {
                  "type": "string",
                  "title": "Prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_field": "prompt"
                  }
                }
              }
            }
          },
          "properties": {
            "prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "camera_notes": {
              "type": "string",
              "_ux": {
                "display": true,
                "display_label": "Camera",
                "highlight": true,
                "highlight_color": "#4ECDC4"
              }
            }
          }
        },
        "stable_diffusion": {
          "type": "object",
          "_ux": {
            "display": "visible",
            "tab_label": "Stable Diffusion",
            "render_as": "tab.media",
            "provider": "stable_diffusion",
            "input_schema": {
              "type": "object",
              "_ux": {
                "layout": "grid",
                "layout_columns": 3,
                "layout_columns_sm": 2
              },
              "properties": {
                "prompt_type": {
                  "type": "string",
                  "title": "Prompt Style",
                  "enum": [
                    { "key": "tag", "label": "Tag-based", "value": "{{ state.image_prompts.prompts.stable_diffusion.tag_prompt }}" },
                    { "key": "natural", "label": "Natural Language", "value": "{{ state.image_prompts.prompts.stable_diffusion.natural_prompt }}" }
                  ],
                  "value_key": "key",
                  "label_key": "label",
                  "default": "tag",
                  "_ux": {
                    "input_type": "select"
                  },
                  "controls": {
                    "_text": {
                      "type": "value",
                      "value_path": ".value"
                    }
                  }
                },
                "_text": {
                  "type": "string",
                  "title": "Prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_field": "tag_prompt"
                  }
                },
                "negative_prompt": {
                  "type": "string",
                  "title": "Negative Prompt",
                  "_ux": {
                    "input_type": "textarea",
                    "col_span": "full",
                    "rows": 4,
                    "source_data": "{negative_prompt}, deformed face, distorted face, malformed face, asymmetrical face, uneven face, stretched face, misaligned eyes, uneven eyes, extra eyes, missing eyes, crossed eyes, mutated eyes, bulging eyes, sunken eyes, glassy eyes, hollow eyes, deformed eyes, unnatural eye placement, warped muzzle, twisted snout, deformed muzzle, crooked nose, broken snout, flattened face, malformed mouth, distorted mouth, extra mouth, duplicated mouth, open mouth, broken jaw, distorted jaw, extra teeth, missing teeth, visible gums, hanging tongue, deformed tongue, deformed head, malformed head, warped skull, crushed head, elongated head, uneven head shape, extra limbs, extra legs, extra ears, missing ears, fused ears, misplaced ears, malformed ears, extra tail, bad anatomy, bad proportions, mutation, mutated, lowres, blurry, out of focus, jpeg artifacts, noisy, oversharpened"
                  }
                },
                "model_category": {
                  "type": "string",
                  "title": "Category",
                  "required": true,
                  "enum": "{{ state.sd_model_categories }}",
                  "value_key": "id",
                  "label_key": "name",
                  "_ux": {
                    "input_type": "select"
                  },
                  "controls": {
                    "checkpoint": {
                      "type": "enum",
                      "enum_path": "models",
                      "value_key": "checkpoint_name",
                      "label_key": "model_name",
                      "default_index": 0,
                      "reset": true
                    }
                  }
                },
                "checkpoint": {
                  "type": "string",
                  "title": "Model",
                  "required": true,
                  "_ux": {
                    "input_type": "select"
                  },
                  "controls": {
                    "sampler_combo": {
                      "type": "enum",
                      "enum_path": "params.sampler_combo",
                      "value_key": "value",
                      "label_format": "{value.sampler} / {value.scheduler} ({value.steps} steps, CFG {value.cfg_scale}) (count: {count})",
                      "default_index": 0,
                      "reset": true
                    },
                    "resolution": {
                      "type": "enum",
                      "enum_path": "params.resolution",
                      "value_key": "value",
                      "label_format": "{value} (count: {count})",
                      "default_index": 0,
                      "reset": true
                    },
                    "vae": {
                      "type": "enum",
                      "enum_path": "params.vae",
                      "value_key": "value",
                      "default_index": 0,
                      "reset": true
                    },
                    "hires": {
                      "type": "enum",
                      "enum_path": "params.hires",
                      "value_key": "value",
                      "label_format": "{value.upscale}x - {value.upscaler} (denoise: {value.denoising}) (count: {count})",
                      "default_index": -1,
                      "reset": true
                    },
                    "adetailer": {
                      "type": "enum",
                      "enum_path": "params.adetailer",
                      "value_key": "value",
                      "label_format": "{value.model} (conf: {value.confidence}, denoise: {value.denoising_strength}) (count: {count})",
                      "default_index": -1,
                      "reset": true
                    }
                  }
                },
                "sampler_combo": {
                  "type": "string",
                  "title": "Sampler",
                  "required": true,
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "resolution": {
                  "type": "string",
                  "title": "Resolution",
                  "required": true,
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "vae": {
                  "type": "string",
                  "title": "VAE",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "hires": {
                  "type": "string",
                  "title": "Hires Fix",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "adetailer": {
                  "type": "string",
                  "title": "ADetailer",
                  "_ux": {
                    "input_type": "select"
                  }
                },
                "batch_size": {
                  "type": "integer",
                  "title": "Images",
                  "enum": [1, 2, 4],
                  "default": 4,
                  "_ux": {
                    "input_type": "select"
                  }
                }
              }
            }
          },
          "properties": {
            "tag_prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "natural_prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "negative_prompt": {
              "type": "string",
              "_ux": {
                "display": false
              }
            },
            "style_notes": {
              "type": "string",
              "_ux": {
                "display": true,
                "display_label": "Style",
                "highlight": true,
                "highlight_color": "#9B59B6"
              }
            }
          }
        }
      }
    }
  }
}
